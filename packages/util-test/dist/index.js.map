{"version":3,"sources":["../src/expects/expectFunction.ts","../src/expects/expectZodParseToThrow.ts","../src/mocks/mockQueryResult.ts","../src/spies/spyOnConsole.ts","../src/spies/spyOnStdout.ts","../src/stubs/stubEnv.ts","../src/utils/flushAsync.ts"],"names":[],"mappings":";;;;;;;AAAO,SAAS,eAAe,EAAA,EAA4D;AACzF,EAAA,MAAA,CAAO,EAAE,CAAA,CAAE,cAAA,CAAe,QAAQ,CAAA;AACpC;AAFgB,MAAA,CAAA,cAAA,EAAA,gBAAA,CAAA;ACET,SAAS,qBAAA,CAAsB,QAAmB,MAAA,EAA2B;AAClF,EAAA,IAAI,QAAA,GAAW,IAAI,QAAA,CAAS,EAAE,CAAA;AAE9B,EAAA,MAAA,CAAO,MAAM;AACX,IAAA,IAAI;AACF,MAAA,MAAA,CAAO,MAAM,MAAM,CAAA;AAAA,IACrB,SAAS,KAAA,EAAO;AACd,MAAA,QAAA,GAAW,KAAA;AACX,MAAA,MAAM,KAAA;AAAA,IACR;AAAA,EACF,CAAC,CAAA,CAAE,YAAA,CAAa,QAAQ,CAAA;AAExB,EAAA,OAAO,QAAA;AACT;AAbgB,MAAA,CAAA,qBAAA,EAAA,uBAAA,CAAA;;;ACAT,SAAS,eAAA,CACd,IAAA,EACA,OAAA,GAAU,QAAA,EACM;AAChB,EAAA,OAAO;AAAA,IACL,OAAA;AAAA,IACA,QAAQ,EAAC;AAAA,IACT,GAAA,EAAK,CAAA;AAAA,IACL,UAAU,IAAA,CAAK,MAAA;AAAA,IACf;AAAA,GACF;AACF;AAXgB,MAAA,CAAA,eAAA,EAAA,iBAAA,CAAA;;;ACsBT,SAAS,aAAa,OAAA,EAA0B;AACrD,EAAA,OAAA,CAAQ,OAAA,CAAQ,CAAC,MAAA,KAAW;AAC1B,IAAA,EAAA,CAAG,KAAA,CAAM,OAAA,EAAS,MAAM,CAAA,CAAE,mBAAmB,MAAM;AAAA,IAEnD,CAAC,CAAA;AAAA,EACH,CAAC,CAAA;AACH;AANgB,MAAA,CAAA,YAAA,EAAA,cAAA,CAAA;AClBT,SAAS,WAAA,GAAgE;AAC9E,EAAA,MAAM,OAAiB,EAAC;AACxB,EAAA,MAAM,cAAA,2BAAsC,KAAA,KAAU;AACpD,IAAA,IAAA,CAAK,IAAA,CAAK,OAAO,KAAA,KAAU,QAAA,GAAW,KAAA,GAAQ,MAAA,CAAO,IAAA,CAAK,KAAK,CAAA,CAAE,QAAA,CAAS,MAAM,CAAC,CAAA;AACjF,IAAA,OAAO,IAAA;AAAA,EACT,CAAA,EAH2C,gBAAA,CAAA;AAI3C,EAAA,MAAM,IAAA,GAAO,GAAG,KAAA,CAAM,OAAA,CAAQ,QAAQ,OAAO,CAAA,CAAE,mBAAmB,cAAc,CAAA;AAEhF,EAAA,OAAO;AAAA,IACL,IAAA,kBAAM,MAAA,CAAA,MAAY,IAAA,CAAK,KAAA,CAAM,CAAA,CAAA,EAAI,KAAK,IAAA,CAAK,GAAG,CAAC,CAAA,CAAA,CAAG,CAAA,EAA5C,MAAA,CAAA;AAAA,IACN;AAAA,GACF;AACF;AAZgB,MAAA,CAAA,WAAA,EAAA,aAAA,CAAA;;;ACNT,SAAS,QAAQ,GAAA,EAAsC;AAC5D,EAAA,MAAA,CAAO,OAAA,CAAQ,GAAG,CAAA,CAAE,OAAA,CAAQ,CAAC,CAAC,GAAA,EAAK,KAAK,CAAA,KAAM;AAC5C,IAAA,EAAA,CAAG,OAAA,CAAQ,GAAA,EAAK,KAAA,CAAM,QAAA,EAAU,CAAA;AAAA,EAClC,CAAC,CAAA;AACH;AAJgB,MAAA,CAAA,OAAA,EAAA,SAAA,CAAA;;;ACAhB,eAAsB,UAAA,GAAa;AACjC,EAAA,MAAM,IAAI,OAAA,CAAQ,CAAC,OAAA,KAAY,YAAA,CAAa,OAAO,CAAC,CAAA;AACpD,EAAA,MAAM,IAAI,OAAA,CAAQ,CAAC,OAAA,KAAY,YAAA,CAAa,OAAO,CAAC,CAAA;AACtD;AAHsB,MAAA,CAAA,UAAA,EAAA,YAAA,CAAA","file":"index.js","sourcesContent":["export function expectFunction(fn: unknown): asserts fn is (...args: unknown[]) => unknown {\n  expect(fn).toBeInstanceOf(Function)\n}\n","import { ZodError, ZodObject } from 'zod'\n\nexport function expectZodParseToThrow(schema: ZodObject, values: unknown): ZodError {\n  let zodError = new ZodError([])\n\n  expect(() => {\n    try {\n      schema.parse(values)\n    } catch (error) {\n      zodError = error as ZodError\n      throw error\n    }\n  }).toThrowError(ZodError)\n\n  return zodError\n}\n","import { type QueryResult, type QueryResultRow } from 'pg'\n\nexport function mockQueryResult<T extends QueryResultRow>(\n  rows: T[],\n  command = 'SELECT'\n): QueryResult<T> {\n  return {\n    command,\n    fields: [],\n    oid: 0,\n    rowCount: rows.length,\n    rows\n  }\n}\n","type ConsoleMethod =\n  | 'assert'\n  | 'clear'\n  | 'count'\n  | 'countReset'\n  | 'debug'\n  | 'dir'\n  | 'dirxml'\n  | 'error'\n  | 'group'\n  | 'groupCollapsed'\n  | 'groupEnd'\n  | 'info'\n  | 'log'\n  | 'profile'\n  | 'profileEnd'\n  | 'table'\n  | 'time'\n  | 'timeEnd'\n  | 'timeLog'\n  | 'timeStamp'\n  | 'trace'\n  | 'warn'\n\nexport function spyOnConsole(methods: ConsoleMethod[]) {\n  methods.forEach((method) => {\n    vi.spyOn(console, method).mockImplementation(() => {\n      /* NOOP */\n    })\n  })\n}\n","import process from 'node:process'\n\nimport { Mock } from 'vitest'\n\ntype ProcessSTDOutWrite = typeof process.stdout.write\n\nexport function spyOnStdout(): { json<T>(): T; mock: Mock<ProcessSTDOutWrite> } {\n  const logs: string[] = []\n  const implementation: ProcessSTDOutWrite = (chunk) => {\n    logs.push(typeof chunk === 'string' ? chunk : Buffer.from(chunk).toString('utf8'))\n    return true\n  }\n  const mock = vi.spyOn(process.stdout, 'write').mockImplementation(implementation)\n\n  return {\n    json: <T>(): T => JSON.parse(`[${logs.join(',')}]`) as T,\n    mock\n  }\n}\n","export function stubEnv(env: Record<string, string | number>) {\n  Object.entries(env).forEach(([key, value]) => {\n    vi.stubEnv(key, value.toString())\n  })\n}\n","export async function flushAsync() {\n  await new Promise((resolve) => setImmediate(resolve))\n  await new Promise((resolve) => setImmediate(resolve))\n}\n"]}