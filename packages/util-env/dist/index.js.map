{"version":3,"sources":["../src/types/types.ts","../src/core/parseEnv.ts","../src/core/createEnvLoader.ts","../src/core/envSchema.ts"],"names":["NodeEnv","dotenv"],"mappings":";;;;;;;AAAO,IAAK,OAAA,qBAAAA,QAAAA,KAAL;AACL,EAAAA,SAAA,aAAA,CAAA,GAAc,aAAA;AACd,EAAAA,SAAA,YAAA,CAAA,GAAa,YAAA;AACb,EAAAA,SAAA,MAAA,CAAA,GAAO,MAAA;AAHG,EAAA,OAAAA,QAAAA;AAAA,CAAA,EAAA,OAAA,IAAA,EAAA;;;ACIL,SAAS,QAAA,CACd,MAAA,EACA,GAAA,EACA,MAAA,EACe;AACf,EAAA,MAAM,MAAA,GAAS,MAAA,CAAO,SAAA,CAAU,GAAG,CAAA;AAEnC,EAAA,IAAI,CAAC,OAAO,OAAA,EAAS;AACnB,IAAA,MAAM,IAAI,KAAA,CAAM,MAAA,CAAO,MAAA,CAAO,KAAK,CAAC,CAAA;AAAA,EACtC;AAEA,EAAA,OAAO,MAAA,CAAO,IAAA;AAChB;AAZgB,MAAA,CAAA,QAAA,EAAA,UAAA,CAAA;;;ACST,SAAS,eAAA,CAA6C;AAAA,EAC3D,MAAA;AAAA,EACA;AACF,CAAA,EAAiC;AAC/B,EAAA,IAAI,SAAA;AACJ,EAAA,MAAM,cAAA,GAAiB,QAAQ,GAAA,CAAI,QAAA;AAEnC,EAAA,SAAS,OAAA,GAAmC;AAC1C,IAAA,IAAI,SAAA,EAAW;AACb,MAAA,OAAO,SAAA;AAAA,IACT;AAEA,IAAAC,MAAA,CAAO,EAAE,KAAA,EAAO,IAAA,EAAM,CAAA;AACtB,IAAA,SAAA,GAAY,OAAO,MAAA,CAAO,QAAA,CAAS,QAAQ,OAAA,CAAQ,GAAA,EAAK,MAAM,CAAC,CAAA;AAE/D,IAAA,OAAO,SAAA;AAAA,EACT;AATS,EAAA,MAAA,CAAA,OAAA,EAAA,SAAA,CAAA;AAWT,EAAA,SAAS,cAAA,GAAiB;AACxB,IAAA,IAAI,cAAA,KAAA,YAAA,mBAAuC;AACzC,MAAA,SAAA,GAAY,MAAA;AAAA,IACd;AAAA,EACF;AAJS,EAAA,MAAA,CAAA,cAAA,EAAA,gBAAA,CAAA;AAMT,EAAA,OAAO;AAAA,IACL,OAAA;AAAA,IACA;AAAA,GACF;AACF;AA5BgB,MAAA,CAAA,eAAA,EAAA,iBAAA,CAAA;ACTT,IAAM,SAAA,GAAY,EAAE,MAAA,CAAO;AAAA,EAChC,QAAA,EAAU,CAAA,CAAE,IAAA,CAAK,OAAO;AAC1B,CAAC","file":"index.js","sourcesContent":["export enum NodeEnv {\n  development = 'development',\n  production = 'production',\n  test = 'test'\n}\n","import { z, ZodError } from 'zod'\n\nimport { type Env } from './envSchema'\n\nexport function parseEnv<TEnv extends z.ZodType<Env>>(\n  schema: TEnv,\n  env: unknown,\n  format: (error: ZodError) => string\n): z.infer<TEnv> {\n  const result = schema.safeParse(env)\n\n  if (!result.success) {\n    throw new Error(format(result.error))\n  }\n\n  return result.data\n}\n","import { config as dotenv } from 'dotenv'\nimport { z, ZodError } from 'zod'\n\nimport { NodeEnv } from '@/src/types'\n\nimport { type Env } from './envSchema'\nimport { parseEnv } from './parseEnv'\n\nexport interface CreateEnvLoaderOptions<TEnv extends z.ZodType<Env>> {\n  format: (error: ZodError) => string\n  schema: TEnv\n}\n\nexport function createEnvLoader<TEnv extends z.ZodType<Env>>({\n  format,\n  schema\n}: CreateEnvLoaderOptions<TEnv>) {\n  let cachedEnv: Readonly<z.infer<TEnv>> | undefined\n  const initialNodeEnv = process.env.NODE_ENV as NodeEnv\n\n  function loadEnv(): Readonly<z.infer<TEnv>> {\n    if (cachedEnv) {\n      return cachedEnv\n    }\n\n    dotenv({ quiet: true })\n    cachedEnv = Object.freeze(parseEnv(schema, process.env, format))\n\n    return cachedEnv\n  }\n\n  function resetCachedEnv() {\n    if (initialNodeEnv !== NodeEnv.production) {\n      cachedEnv = undefined\n    }\n  }\n\n  return {\n    loadEnv,\n    resetCachedEnv\n  }\n}\n","import { z } from 'zod'\n\nimport { NodeEnv } from '@/src/types'\n\nexport const envSchema = z.object({\n  NODE_ENV: z.enum(NodeEnv)\n})\n\nexport type Env = z.infer<typeof envSchema>\n"]}