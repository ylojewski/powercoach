{"version":3,"sources":["../src/core/env/envSchema.ts","../src/core/env/loadEnv.ts","../src/client/createClient.ts","../src/schema/metadata.ts"],"names":["baseEnvSchema"],"mappings":";;;;;;;;AAGO,IAAM,SAAA,GAAYA,YAAc,MAAA,CAAO;AAAA,EAC5C,cAAc,CAAA,CAAE,GAAA,CAAI,EAAE,QAAA,EAAU,mBAAmB;AACrD,CAAC;ACDM,IAAM,EAAE,OAAA,EAAS,cAAA,EAAe,GAAI,eAAA,CAAgB;AAAA,EACzD,wBAAQ,MAAA,CAAA,CAAC,KAAA,KAAU,CAAA,qBAAA,EAAwB,KAAA,CAAM,OAAO,CAAA,CAAA,EAAhD,QAAA,CAAA;AAAA,EACR,MAAA,EAAQ;AACV,CAAC;;;ACED,eAAsB,aAAa,OAAA,EAA+B;AAChE,EAAA,MAAM,EAAA,GAAK,IAAI,MAAA,CAAO;AAAA,IACpB,gBAAA,EAAkB,OAAA,EAAS,WAAA,IAAe,OAAA,EAAQ,CAAE;AAAA,GACrD,CAAA;AAED,EAAA,IAAI;AACF,IAAA,MAAM,GAAG,OAAA,EAAQ;AAAA,EACnB,SAAS,KAAA,EAAO;AACd,IAAA,OAAA,CAAQ,KAAA,CAAM,yCAAoC,KAAK,CAAA;AACvD,IAAA,MAAM,KAAA;AAAA,EACR;AAEA,EAAA,OAAO;AAAA,IACL,EAAA,EAAI,QAAQ,EAAE,CAAA;AAAA,IACd;AAAA,GACF;AACF;AAhBsB,MAAA,CAAA,YAAA,EAAA,cAAA,CAAA;ACPf,IAAM,QAAA,GAAW,QAAQ,UAAA,EAAY;AAAA,EAC1C,EAAA,EAAI,MAAA,CAAO,IAAI,CAAA,CAAE,UAAA,EAAW;AAAA,EAC5B,GAAA,EAAK,IAAA,CAAK,KAAK,CAAA,CAAE,OAAA,EAAQ;AAAA,EACzB,KAAA,EAAO,IAAA,CAAK,OAAO,CAAA,CAAE,OAAA;AACvB,CAAC","file":"index.js","sourcesContent":["import { envSchema as baseEnvSchema } from '@powercoach/util-env'\nimport { z } from 'zod'\n\nexport const envSchema = baseEnvSchema.extend({\n  DATABASE_URL: z.url({ protocol: /^postgres(ql)?$/ })\n})\n\nexport type Env = z.infer<typeof envSchema>\n","import { createEnvLoader } from '@powercoach/util-env'\n\nimport { envSchema } from './envSchema'\n\nexport const { loadEnv, resetCachedEnv } = createEnvLoader({\n  format: (error) => `Invalid environment: ${error.message}`,\n  schema: envSchema\n})\n","import { drizzle } from 'drizzle-orm/node-postgres'\nimport { Client } from 'pg'\n\nimport { loadEnv } from '@/src/core'\n\nexport interface CreateClientOptions {\n  databaseUrl: string\n}\n\nexport async function createClient(options?: CreateClientOptions) {\n  const pg = new Client({\n    connectionString: options?.databaseUrl ?? loadEnv().DATABASE_URL\n  })\n\n  try {\n    await pg.connect()\n  } catch (error) {\n    console.error('‚ùå Failed to connect to database:', error)\n    throw error\n  }\n\n  return {\n    db: drizzle(pg),\n    pg\n  }\n}\n","import { pgTable, serial, text } from 'drizzle-orm/pg-core'\n\nexport const metadata = pgTable('metadata', {\n  id: serial('id').primaryKey(),\n  key: text('key').notNull(),\n  value: text('value').notNull()\n})\n"]}